{% extends 'base.html' %}

{% block content %}
  <h1>コンタクト</h1>

  <ul class="list-group">
    {% for conversation in conversations %}
      <li class="list-group-item">
        <a href="{{ url_for('view_contact', other_user_id=conversation.get_other_user_id(current_user.id)) }}">
          {{ conversation.get_other_user(current_user.id).username }} との会話
        </a>
      </li>
    {% endfor %}
  </ul>

  <!-- 新しい会話を開始するボタンを追加 -->
  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#startConversationModal">
      新しい会話を開始する
  </button>

  <!-- モーダル -->
  <div class="modal fade" id="startConversationModal" tabindex="-1" aria-labelledby="startConversationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="startConversationModalLabel">新しい会話を開始する</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="閉じる"></button>
        </div>
        <div class="modal-body">
          <!-- 会話開始フォームはここに配置 -->
          <form id="startConversationForm" method="POST" action="{{ url_for('start_new_conversation') }}">
            {{ form.csrf_token }}
            <!-- ... フォームの内容 ... -->
            <button type="submit" class="btn btn-primary">会話を始める</button>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
